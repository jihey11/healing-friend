<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í≥†Í∏â Idle Animation - Îã§ÏñëÌïú Ìå®ÌÑ¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', sans-serif;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }

        canvas {
            display: block;
            margin: 0 auto;
            background: #f8f9fa;
            border-radius: 12px;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .controls {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .control-btn {
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .control-btn.active {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #333;
        }

        .info {
            margin-top: 20px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 8px;
            font-size: 14px;
            color: #666;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .info-row:last-child {
            margin-bottom: 0;
        }

        .label {
            font-weight: bold;
            color: #333;
        }

        .value {
            color: #667eea;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé≠ Í≥†Í∏â Idle Animation</h1>
        <canvas id="canvas" width="500" height="400"></canvas>
        
        <div class="controls">
            <button class="control-btn active" data-pattern="bounce">ÌÜµÌÜµ ÌäÄÍ∏∞</button>
            <button class="control-btn" data-pattern="breathe">Ïà®Ïâ¨Í∏∞</button>
            <button class="control-btn" data-pattern="sway">Ï¢åÏö∞ ÌùîÎì§Í∏∞</button>
            <button class="control-btn" data-pattern="excited">Ïã†ÎÇòÍ≤å</button>
        </div>

        <div class="info">
            <div class="info-row">
                <span class="label">ÌòÑÏû¨ Ìå®ÌÑ¥:</span>
                <span class="value" id="current-pattern">ÌÜµÌÜµ ÌäÄÍ∏∞</span>
            </div>
            <div class="info-row">
                <span class="label">ÌîÑÎ†àÏûÑ:</span>
                <span class="value" id="current-frame">0 / 8</span>
            </div>
            <div class="info-row">
                <span class="label">FPS:</span>
                <span class="value">8</span>
            </div>
        </div>
    </div>

    <script>
        // ==================== ÏÑ§Ï†ï ====================
        const CONFIG = {
            canvas: { width: 500, height: 400, centerX: 250, centerY: 200 },
            animation: { targetFPS: 8, frameDuration: 125, totalFrames: 8 },
            character: { baseRadius: 70, color: '#FFD700', strokeColor: '#FFA500' }
        };

        // ==================== Canvas Ï¥àÍ∏∞Ìôî ====================
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // ==================== Ïï†ÎãàÎ©îÏù¥ÏÖò ÏÉÅÌÉú ====================
        let lastFrameTime = 0;
        let accumulatedTime = 0;
        let currentFrame = 0;
        let animationId = null;
        let currentPattern = 'bounce';

        // ==================== Ïï†ÎãàÎ©îÏù¥ÏÖò Ìå®ÌÑ¥ Ï†ïÏùò ====================
        const ANIMATION_PATTERNS = {
            // Ìå®ÌÑ¥ 1: ÌÜµÌÜµ ÌäÄÍ∏∞
            bounce: [
                { scaleX: 1.00, scaleY: 1.00, offsetX: 0, offsetY: 0,   rotation: 0 },
                { scaleX: 0.95, scaleY: 1.05, offsetX: 0, offsetY: -3,  rotation: 0 },
                { scaleX: 0.90, scaleY: 1.10, offsetX: 0, offsetY: -8,  rotation: 0 },
                { scaleX: 0.95, scaleY: 1.05, offsetX: 0, offsetY: -10, rotation: 0 },
                { scaleX: 1.00, scaleY: 1.00, offsetX: 0, offsetY: -8,  rotation: 0 },
                { scaleX: 1.05, scaleY: 0.95, offsetX: 0, offsetY: -3,  rotation: 0 },
                { scaleX: 1.08, scaleY: 0.92, offsetX: 0, offsetY: 0,   rotation: 0 },
                { scaleX: 1.03, scaleY: 0.97, offsetX: 0, offsetY: 0,   rotation: 0 }
            ],

            // Ìå®ÌÑ¥ 2: Ïà®Ïâ¨Í∏∞
            breathe: [
                { scaleX: 1.00, scaleY: 1.00, offsetX: 0, offsetY: 0,  rotation: 0 },
                { scaleX: 1.02, scaleY: 1.02, offsetX: 0, offsetY: -1, rotation: 0 },
                { scaleX: 1.04, scaleY: 1.04, offsetX: 0, offsetY: -2, rotation: 0 },
                { scaleX: 1.05, scaleY: 1.05, offsetX: 0, offsetY: -2, rotation: 0 },
                { scaleX: 1.04, scaleY: 1.04, offsetX: 0, offsetY: -2, rotation: 0 },
                { scaleX: 1.02, scaleY: 1.02, offsetX: 0, offsetY: -1, rotation: 0 },
                { scaleX: 1.00, scaleY: 1.00, offsetX: 0, offsetY: 0,  rotation: 0 },
                { scaleX: 0.99, scaleY: 0.99, offsetX: 0, offsetY: 0,  rotation: 0 }
            ],

            // Ìå®ÌÑ¥ 3: Ï¢åÏö∞ ÌùîÎì§Í∏∞
            sway: [
                { scaleX: 1.00, scaleY: 1.00, offsetX: 0,  offsetY: 0, rotation: 0 },
                { scaleX: 0.98, scaleY: 1.02, offsetX: 3,  offsetY: 0, rotation: 3 },
                { scaleX: 0.96, scaleY: 1.04, offsetX: 6,  offsetY: 0, rotation: 5 },
                { scaleX: 0.98, scaleY: 1.02, offsetX: 3,  offsetY: 0, rotation: 3 },
                { scaleX: 1.00, scaleY: 1.00, offsetX: 0,  offsetY: 0, rotation: 0 },
                { scaleX: 0.98, scaleY: 1.02, offsetX: -3, offsetY: 0, rotation: -3 },
                { scaleX: 0.96, scaleY: 1.04, offsetX: -6, offsetY: 0, rotation: -5 },
                { scaleX: 0.98, scaleY: 1.02, offsetX: -3, offsetY: 0, rotation: -3 }
            ],

            // Ìå®ÌÑ¥ 4: Ïã†ÎÇòÍ≤å
            excited: [
                { scaleX: 1.00, scaleY: 1.00, offsetX: 0,  offsetY: 0,   rotation: 0 },
                { scaleX: 0.95, scaleY: 1.10, offsetX: 2,  offsetY: -5,  rotation: 5 },
                { scaleX: 0.90, scaleY: 1.15, offsetX: 0,  offsetY: -12, rotation: 0 },
                { scaleX: 0.95, scaleY: 1.10, offsetX: -2, offsetY: -10, rotation: -5 },
                { scaleX: 1.05, scaleY: 0.90, offsetX: 0,  offsetY: -5,  rotation: 0 },
                { scaleX: 1.10, scaleY: 0.85, offsetX: 3,  offsetY: 0,   rotation: 8 },
                { scaleX: 1.05, scaleY: 0.90, offsetX: 0,  offsetY: 2,   rotation: 0 },
                { scaleX: 1.00, scaleY: 0.95, offsetX: -2, offsetY: 0,   rotation: -3 }
            ]
        };

        // ==================== Ï∫êÎ¶≠ÌÑ∞ Í∑∏Î¶¨Í∏∞ ====================
        function drawCharacter(frameIndex) {
            const frame = ANIMATION_PATTERNS[currentPattern][frameIndex];
            const cx = CONFIG.canvas.centerX + frame.offsetX;
            const cy = CONFIG.canvas.centerY + frame.offsetY;

            ctx.save();
            
            // ÌöåÏ†Ñ Ï†ÅÏö©
            ctx.translate(cx, cy);
            ctx.rotate(frame.rotation * Math.PI / 180);
            ctx.translate(-cx, -cy);

            // Î™∏Ï≤¥
            const rx = CONFIG.character.baseRadius * frame.scaleX;
            const ry = CONFIG.character.baseRadius * frame.scaleY;
            const k = 0.552284749831;
            const ox = rx * k;
            const oy = ry * k;

            ctx.shadowColor = 'rgba(0, 0, 0, 0.15)';
            ctx.shadowBlur = 15;
            ctx.shadowOffsetY = 8;

            ctx.fillStyle = CONFIG.character.color;
            ctx.strokeStyle = CONFIG.character.strokeColor;
            ctx.lineWidth = 3;

            ctx.beginPath();
            ctx.moveTo(cx, cy - ry);
            ctx.bezierCurveTo(cx + ox, cy - ry, cx + rx, cy - oy, cx + rx, cy);
            ctx.bezierCurveTo(cx + rx, cy + oy, cx + ox, cy + ry, cx, cy + ry);
            ctx.bezierCurveTo(cx - ox, cy + ry, cx - rx, cy + oy, cx - rx, cy);
            ctx.bezierCurveTo(cx - rx, cy - oy, cx - ox, cy - ry, cx, cy - ry);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();

            ctx.shadowColor = 'transparent';
            ctx.shadowBlur = 0;

            // ÏñºÍµ¥
            ctx.fillStyle = '#000';
            ctx.beginPath();
            ctx.arc(cx - 22, cy - 10, 5, 0, Math.PI * 2);
            ctx.arc(cx + 22, cy - 10, 5, 0, Math.PI * 2);
            ctx.fill();

            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2.5;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.arc(cx, cy + 15, 15, 0.2 * Math.PI, 0.8 * Math.PI);
            ctx.stroke();

            ctx.fillStyle = 'rgba(255, 200, 220, 0.6)';
            ctx.beginPath();
            ctx.ellipse(cx - 40, cy + 10, 10, 7, 0, 0, Math.PI * 2);
            ctx.ellipse(cx + 40, cy + 10, 10, 7, 0, 0, Math.PI * 2);
            ctx.fill();

            ctx.restore();
        }

        // ==================== Ïï†ÎãàÎ©îÏù¥ÏÖò Î£®ÌîÑ ====================
        function animate(currentTime) {
            const deltaTime = currentTime - lastFrameTime;
            accumulatedTime += deltaTime;

            if (accumulatedTime >= CONFIG.animation.frameDuration) {
                currentFrame = (currentFrame + 1) % CONFIG.animation.totalFrames;
                accumulatedTime -= CONFIG.animation.frameDuration;
                updateInfo();
            }

            ctx.clearRect(0, 0, CONFIG.canvas.width, CONFIG.canvas.height);
            drawCharacter(currentFrame);

            lastFrameTime = currentTime;
            animationId = requestAnimationFrame(animate);
        }

        // ==================== UI ÏóÖÎç∞Ïù¥Ìä∏ ====================
        function updateInfo() {
            document.getElementById('current-frame').textContent = 
                `${currentFrame} / ${CONFIG.animation.totalFrames}`;
        }

        // ==================== Ìå®ÌÑ¥ Î≥ÄÍ≤Ω ====================
        function changePattern(pattern) {
            currentPattern = pattern;
            currentFrame = 0;
            accumulatedTime = 0;
            
            // Î≤ÑÌäº ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.pattern === pattern) {
                    btn.classList.add('active');
                }
            });

            // Ìå®ÌÑ¥ Ïù¥Î¶Ñ ÌëúÏãú
            const patternNames = {
                bounce: 'ÌÜµÌÜµ ÌäÄÍ∏∞',
                breathe: 'Ïà®Ïâ¨Í∏∞',
                sway: 'Ï¢åÏö∞ ÌùîÎì§Í∏∞',
                excited: 'Ïã†ÎÇòÍ≤å'
            };
            document.getElementById('current-pattern').textContent = patternNames[pattern];
        }

        // ==================== Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà ====================
        document.querySelectorAll('.control-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                changePattern(btn.dataset.pattern);
            });
        });

        // ==================== ÏãúÏûë ====================
        window.addEventListener('load', () => {
            lastFrameTime = performance.now();
            animationId = requestAnimationFrame(animate);
            console.log('üé¨ Í≥†Í∏â Ïï†ÎãàÎ©îÏù¥ÏÖò ÏãúÏûë!');
        });

        window.addEventListener('beforeunload', () => {
            if (animationId) cancelAnimationFrame(animationId);
        });

    </script>
</body>
</html>


