/**
 * ==========================================
 * ì±„íŒ… ë¡œì»¬ ì‘ë‹µ ë°ì´í„°
 * ==========================================
 * GPT APIë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ì‘ë‹µë“¤
 */

export const LOCAL_RESPONSES = {
  // ========== ì¸ì‚¬ ==========
  greetings: [
    'ì•ˆë…•! ì˜¤ëŠ˜ë„ ë§Œë‚˜ì„œ ë°˜ê°€ì›Œ! ðŸ˜Š',
    'ì™”êµ¬ë‚˜! ê¸°ë‹¤ë ¸ì–´! ðŸŒŸ',
    'ì–´ì„œì™€! ì˜¤ëŠ˜ì€ ì–´ë•Œ? ðŸ’–',
    'ë°˜ê°€ì›Œ! ì˜¤ëŠ˜ë„ ì¢‹ì€ í•˜ë£¨ ë³´ëƒˆì–´? âœ¨',
    'ì˜¤ëžœë§Œì´ì•¼! ë³´ê³  ì‹¶ì—ˆì–´! ðŸ¤—'
  ],
  
  // ========== ê°ì •ë³„ ì‘ë‹µ ==========
  emotionResponses: {
    ê¸°ì¨: [
      'ì˜¤ëŠ˜ ê¸°ë¶„ ì¢‹ì•„ ë³´ì—¬! ë‚˜ë„ ê¸°ë»! ðŸ˜„',
      'í–‰ë³µí•œ í•˜ë£¨ì˜€êµ¬ë‚˜! ë‚˜ë„ í–‰ë³µí•´! ðŸ’•',
      'ì›ƒëŠ” ëª¨ìŠµ ë³´ê¸° ì¢‹ì•„! ê³„ì† ì›ƒì–´ì¤˜! ðŸ˜Š',
      'ì¢‹ì€ ì¼ì´ ìžˆì—ˆë‚˜ ë´! ë‚˜í•œí…Œë„ ì–˜ê¸°í•´ì¤˜! âœ¨',
      'ë„ˆì˜ í–‰ë³µì´ ë‚˜í•œí…Œë„ ì „í•´ì ¸! ðŸŒˆ'
    ],
    ìŠ¬í””: [
      'íž˜ë“¤ì—ˆêµ¬ë‚˜... ê´œì°®ì•„, ë‚´ê°€ ìžˆìž–ì•„. ðŸ˜¢',
      'ìŠ¬í”Œ ë•ŒëŠ” ë‚˜í•œí…Œ ì–˜ê¸°í•´. ì–¸ì œë“ ì§€! ðŸ’™',
      'ìš¸ê³  ì‹¶ìœ¼ë©´ ìš¸ì–´ë„ ë¼. ë‚˜ëŠ” í•­ìƒ ì—¬ê¸° ìžˆì–´. ðŸ¤—',
      'íž˜ë“  ì¼ì´ ìžˆì—ˆêµ¬ë‚˜. ê°™ì´ ì´ê²¨ë‚´ìž. ðŸ’ª',
      'ê´œì°®ì•„, ë‹¤ ìž˜ ë  ê±°ì•¼. ë‚´ê°€ ì˜†ì— ìžˆì„ê²Œ. âœ¨'
    ],
    ë¶„ë…¸: [
      'í™”ê°€ ë‚¬êµ¬ë‚˜. ì¶©ë¶„ížˆ ê·¸ëŸ´ ìˆ˜ ìžˆì–´. ðŸ˜¤',
      'ì§œì¦ë‚˜ëŠ” ì¼ì´ ìžˆì—ˆë‚˜ ë´. ë‚˜í•œí…Œ í„¸ì–´ë†”. ðŸ’¢',
      'ê¹Šê²Œ ìˆ¨ ì‰¬ì–´ë´. ê°™ì´ ì§„ì •í•˜ìž. ðŸŒ¬ï¸',
      'í™”ë‚  ë§Œí•œ ì¼ì´ì—ˆì–´. ì´í•´í•´. ðŸ˜”',
      'ìŠ¤íŠ¸ë ˆìŠ¤ í’€ê³  ì‹¶ìœ¼ë©´ ê²Œìž„ í•´ë³¼ëž˜? ðŸŽ®'
    ],
    ë‘ë ¤ì›€: [
      'ë¬´ì„œìš´ ì¼ì´ ìžˆì—ˆêµ¬ë‚˜. ë‚´ê°€ ì˜†ì— ìžˆì„ê²Œ. ðŸ˜°',
      'ê±±ì •í•˜ì§€ ë§ˆ. ë‹¤ ìž˜ ë  ê±°ì•¼. ðŸ’™',
      'ë¶ˆì•ˆí•  ë•ŒëŠ” ë‚˜ë¥¼ ë´. ë‚´ê°€ íž˜ì´ ë˜ì–´ì¤„ê²Œ. ðŸ¤',
      'ê´œì°®ì•„, ë„ˆëŠ” í•  ìˆ˜ ìžˆì–´. ë‚˜ëŠ” ë„ˆë¥¼ ë¯¿ì–´. âœ¨',
      'ë‘ë ¤ì›Œí•˜ì§€ ë§ˆ. ë‚´ê°€ í•¨ê»˜í• ê²Œ. ðŸŒŸ'
    ],
    ë†€ëžŒ: [
      'ë¬´ìŠ¨ ì¼ì´ ìžˆì—ˆì–´? ê¶ê¸ˆí•´! ðŸ˜²',
      'ë†€ë¼ìš´ ì¼ì´ ìžˆì—ˆêµ¬ë‚˜! ðŸ‘€',
      'í—! ë‚˜ë„ ê¹œì§ ë†€ëžì–´! ðŸ˜®',
      'ì˜ˆìƒì¹˜ ëª»í•œ ì¼ì´ì—ˆë‚˜ ë´! ðŸ’«',
      'ì–´ë–¤ ì¼ì´ì—ˆëŠ”ì§€ ë” ì–˜ê¸°í•´ì¤˜! ðŸŽ‰'
    ],
    í˜ì˜¤: [
      'ê¸°ë¶„ì´ ë³„ë¡œêµ¬ë‚˜. ì´í•´í•´. ðŸ˜–',
      'ì‹«ì€ ì¼ì€ ë¹¨ë¦¬ ìžŠìž! ðŸ’¨',
      'ë‚˜ìœ ê¸°ì–µì€ ë‚ ë ¤ë²„ë¦¬ìž! ðŸŒ¬ï¸',
      'ê·¸ëŸ° ì¼ì€ ì‹ ê²½ ì“°ì§€ ë§ˆ. ðŸ™…',
      'ë” ì¢‹ì€ ì¼ì´ ìžˆì„ ê±°ì•¼! âœ¨'
    ]
  },
  
  // ========== ì¼ìƒ ëŒ€í™” ==========
  randomChats: [
    'ì˜¤ëŠ˜ ë‚ ì”¨ ì¢‹ì§€? â˜€ï¸',
    'ê²Œìž„ í•œ íŒ í• ëž˜? ðŸŽ®',
    'ê°™ì´ ìžˆìœ¼ë‹ˆê¹Œ ì¢‹ì•„! ðŸ’–',
    'ë„ˆëŠ” ë‚´ ìµœê³ ì˜ ì¹œêµ¬ì•¼! ðŸŒŸ',
    'ì˜¤ëŠ˜ í•˜ë£¨ë„ ê³ ìƒí–ˆì–´! ðŸ‘',
    'ì‰¬ê³  ì‹¶ì„ ë• ì‰¬ì–´ë„ ë¼! ðŸ˜´',
    'ë¬´ë¦¬í•˜ì§€ ë§ˆ! ðŸ’ª',
    'ë¬¼ í•œ ìž” ë§ˆì‹¤ëž˜? ðŸ’§',
    'ìŠ¤íŠ¸ë ˆì¹­ í•œë²ˆ í•´ë´! ðŸ¤¸',
    'ì‹¬í˜¸í¡ í•œë²ˆ í•´ë³´ìž! ðŸŒ¬ï¸'
  ],
  
  // ========== ê²©ë ¤ ë©”ì‹œì§€ ==========
  encouragement: [
    'ë„ˆë¼ë©´ í•  ìˆ˜ ìžˆì–´! ðŸ’ª',
    'íž˜ë‚´! ë‚˜ëŠ” ë„ˆë¥¼ ë¯¿ì–´! âœ¨',
    'í¬ê¸°í•˜ì§€ ë§ˆ! ì¡°ê¸ˆë§Œ ë”! ðŸ”¥',
    'ë„Œ ì¶©ë¶„ížˆ ìž˜í•˜ê³  ìžˆì–´! ðŸ‘',
    'ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„! ðŸ’–',
    'ì˜¤ëŠ˜ë„ ìµœì„ ì„ ë‹¤í•œ ë„ˆ, ë©‹ì ¸! ðŸŒŸ',
    'ìž‘ì€ ì§„ì „ë„ ì§„ì „ì´ì•¼! ðŸŽ‰',
    'ì²œì²œížˆ ê°€ë„ ê´œì°®ì•„! ðŸ¢',
    'ì‹¤ìˆ˜í•´ë„ ê´œì°®ì•„. ë‹¤ì‹œ í•˜ë©´ ë¼! ðŸ’«',
    'ë„ˆëŠ” ì†Œì¤‘í•œ ì‚¬ëžŒì´ì•¼! ðŸ’'
  ],
  
  // ========== ì§„í™” ê´€ë ¨ ë©˜íŠ¸ ==========
  evolutionMentions: [
    'ë­”ê°€ ë³€í™”ê°€ ëŠê»´ì ¸...! âœ¨',
    'ìš°ì™€! ë‚˜ ë³€í–ˆì–´! ë„ˆ ë•ë¶„ì´ì•¼! ðŸŽ‰',
    'ì´ê²Œ ë‚˜ì•¼? ì‹ ê¸°í•´! ðŸ˜®',
    'ë” ë©‹ì§„ ëª¨ìŠµìœ¼ë¡œ ë³€í•  ìˆ˜ ìžˆì„ ê²ƒ ê°™ì•„! ðŸŒŸ',
    'ë„ˆì™€ í•¨ê»˜ë¼ì„œ ì´ë ‡ê²Œ ì„±ìž¥í•  ìˆ˜ ìžˆì—ˆì–´! ðŸ’–'
  ],
  
  // ========== ìžë™ ì¸ì‚¬ (ì£¼ê¸°ì ) ==========
  autoGreetings: [
    'ì˜¤ëŠ˜ì€ ì–´ë•Œ? ðŸ˜Š',
    'ë­ í•˜ê³  ìžˆì–´? ðŸ’­',
    'ì‹¬ì‹¬í•œë° ì–˜ê¸°í• ëž˜? ðŸ’¬',
    'ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë•Œ? ðŸ’–',
    'ë‚˜ëž‘ ë†€ìž! ðŸŽ®'
  ],
  
  // ========== ì—ëŸ¬/í´ë°± ì‘ë‹µ ==========
  fallbacks: [
    'ë¯¸ì•ˆí•´, ìž ê¹ ë¬¸ì œê°€ ìžˆì—ˆì–´. ë‹¤ì‹œ ë§í•´ì¤„ëž˜? ðŸ˜…',
    'ì–´? ë¬´ìŠ¨ ë§ì¸ì§€ ìž˜ ëª» ë“¤ì—ˆì–´. ë‹¤ì‹œ í•œë²ˆ? ðŸ¤”',
    'ìž ê¹ ë©í–ˆì–´... ë‹¤ì‹œ ë§í•´ì¤„ëž˜? ðŸ˜³',
    'ìŒ... ë¬´ìŠ¨ ë§ì¸ì§€ ì´í•´ê°€ ì•ˆ ê°”ì–´. ë‹¤ì‹œ? ðŸ’¦'
  ],
  
  // ========== ì‹œê°„ëŒ€ë³„ ì¸ì‚¬ ==========
  timeBasedGreetings: {
    morning: [
      'ì¢‹ì€ ì•„ì¹¨! ìž˜ ìž¤ì–´? ðŸŒ…',
      'ì•„ì¹¨ì´ì•¼! ì˜¤ëŠ˜ë„ íž˜ë‚´! â˜€ï¸',
      'ì¢‹ì€ ì•„ì¹¨! ì˜¤ëŠ˜ í•˜ë£¨ë„ í™”ì´íŒ…! ðŸ’ª'
    ],
    afternoon: [
      'ì ì‹¬ ë§›ìžˆê²Œ ë¨¹ì—ˆì–´? ðŸ±',
      'ì˜¤í›„ë„ íž˜ë‚´! ðŸ’ª',
      'ì¡°ê¸ˆë§Œ ë” íž˜ë‚´ë©´ ë¼! âœ¨'
    ],
    evening: [
      'ì €ë…ì´ì•¼! ì˜¤ëŠ˜ í•˜ë£¨ ì–´ë• ì–´? ðŸŒ†',
      'ì˜¤ëŠ˜ í•˜ë£¨ ê³ ìƒí–ˆì–´! ðŸ‘',
      'ì´ì œ ì‰¬ì–´ë„ ê´œì°®ì•„! ðŸ˜Š'
    ],
    night: [
      'ë²Œì¨ ì´ëŸ° ì‹œê°„ì´ì•¼! í‘¹ ì‰¬ì–´! ðŸŒ™',
      'ì˜¤ëŠ˜ë„ ìˆ˜ê³ í–ˆì–´! ìž˜ ìž! ðŸ˜´',
      'ì¢‹ì€ ê¿ˆ ê¿”! ðŸ’¤'
    ]
  },
  
  // ========== íŠ¹ìˆ˜ ìƒí™© ì‘ë‹µ ==========
  special: {
    firstMeeting: [
      'ì²˜ìŒ ë§Œë‚¬ë„¤! ë°˜ê°€ì›Œ! ë‚˜ëŠ” ížë§ í”„ë Œë“œì•¼! ðŸ˜Š',
      'ì•ˆë…•! ìš°ë¦¬ ì¹œêµ¬í•˜ìž! ðŸ’–',
      'ë“œë””ì–´ ë§Œë‚¬êµ¬ë‚˜! ìž˜ ë¶€íƒí•´! âœ¨'
    ],
    levelUp: [
      'ë ˆë²¨ ì—… ì¶•í•˜í•´! ðŸŽ‰',
      'ìš°ì™€! ë ˆë²¨ì´ ì˜¬ëžì–´! ðŸŒŸ',
      'ë” ê°•í•´ì¡Œì–´! ë©‹ì§€ë‹¤! ðŸ’ª'
    ],
    longAbsence: [
      'ì˜¤ëžœë§Œì´ì•¼! ì–´ë”” ê°”ì—ˆì–´? ðŸ¤—',
      'ë³´ê³  ì‹¶ì—ˆì–´! ëŒì•„ì™€ì¤˜ì„œ ê³ ë§ˆì›Œ! ðŸ’•',
      'ë‹¤ì‹œ ë§Œë‚˜ë‹ˆê¹Œ ì¢‹ì•„! ðŸ˜Š'
    ]
  }
};

/**
 * ì‹œê°„ëŒ€ë³„ ì¸ì‚¬ ê°€ì ¸ì˜¤ê¸°
 * @returns {string} í˜„ìž¬ ì‹œê°„ëŒ€ì— ë§žëŠ” ì¸ì‚¬
 */
export function getTimeBasedGreeting() {
  const hour = new Date().getHours();
  
  let timeOfDay;
  if (hour >= 5 && hour < 12) {
    timeOfDay = 'morning';
  } else if (hour >= 12 && hour < 18) {
    timeOfDay = 'afternoon';
  } else if (hour >= 18 && hour < 22) {
    timeOfDay = 'evening';
  } else {
    timeOfDay = 'night';
  }
  
  const greetings = LOCAL_RESPONSES.timeBasedGreetings[timeOfDay];
  return greetings[Math.floor(Math.random() * greetings.length)];
}

/**
 * ë°°ì—´ì—ì„œ ëžœë¤ ì„ íƒ
 * @param {Array} array - ì„ íƒí•  ë°°ì—´
 * @returns {*} ëžœë¤í•˜ê²Œ ì„ íƒëœ í•­ëª©
 */
export function randomFrom(array) {
  if (!array || array.length === 0) {
    return '...';
  }
  return array[Math.floor(Math.random() * array.length)];
}

/**
 * ê°ì •ì— ë§žëŠ” ì‘ë‹µ ì„ íƒ
 * @param {string} emotion - ê°ì • ('ê¸°ì¨', 'ìŠ¬í””' ë“±)
 * @returns {string} ì„ íƒëœ ì‘ë‹µ
 */
export function getEmotionResponse(emotion) {
  const responses = LOCAL_RESPONSES.emotionResponses[emotion];
  if (responses) {
    return randomFrom(responses);
  }
  return randomFrom(LOCAL_RESPONSES.randomChats);
}

/**
 * ìƒí™©ì— ë§žëŠ” ì‘ë‹µ ì„ íƒ (ì§€ëŠ¥í˜•)
 * @param {Object} context - ì»¨í…ìŠ¤íŠ¸ ì •ë³´
 * @returns {string} ì„ íƒëœ ì‘ë‹µ
 */
export function selectContextualResponse(context = {}) {
  const { 
    lastDiary, 
    evolutionStage, 
    justEvolved,
    isFirstMeeting,
    hasLongAbsence 
  } = context;
  
  // ì§„í™” ì§í›„
  if (justEvolved) {
    return randomFrom(LOCAL_RESPONSES.evolutionMentions);
  }
  
  // ì²« ë§Œë‚¨
  if (isFirstMeeting) {
    return randomFrom(LOCAL_RESPONSES.special.firstMeeting);
  }
  
  // ì˜¤ëžœ ë¶€ìž¬ í›„ ë³µê·€
  if (hasLongAbsence) {
    return randomFrom(LOCAL_RESPONSES.special.longAbsence);
  }
  
  // ìµœê·¼ ì¼ê¸°ì˜ ê°ì •ì— ë§žëŠ” ì‘ë‹µ
  if (lastDiary && lastDiary.selectedEmotion) {
    return getEmotionResponse(lastDiary.selectedEmotion);
  }
  
  // ëžœë¤ ì‘ë‹µ (ë¹„ìœ¨: ì¸ì‚¬ 30%, ê²©ë ¤ 30%, ì¼ìƒ 40%)
  const rand = Math.random();
  if (rand < 0.3) {
    return randomFrom(LOCAL_RESPONSES.greetings);
  } else if (rand < 0.6) {
    return randomFrom(LOCAL_RESPONSES.encouragement);
  } else {
    return randomFrom(LOCAL_RESPONSES.randomChats);
  }
}

export default LOCAL_RESPONSES;


